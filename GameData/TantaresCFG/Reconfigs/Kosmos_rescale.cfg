// Rescales the Tantares Kosmos 3M to from 1.25 m diameter to a more correct 1.5 m
// By mountainparrot

// Engines //

// RD-216
@PART[corvus_lv*engine_s1_1]:NEEDS[TantaresLV]:FIRST{
	@rescaleFactor = 1.2
	@bulkheadProfiles = size1p2
	
	@MODULE[ModuleEnginesFX]{
		@maxThrust = 436.15 // 25% thrust scaling (218.075 kN * 2)
		
		!atmosphereCurve{}
		%atmosphereCurve
		{
			key = 0 291.3
			key = 1 248
			key = 6 0.001
		}
	}
}
// S5.23 - 11D49
@PART[corvus_lv*engine_s1_2]:NEEDS[TantaresLV]:FIRST{
	@rescaleFactor = 1.2
	@bulkheadProfiles = size1p2
	
	@MODULE[ModuleEnginesFX]{
		@maxThrust = 39.4 // 25% thrust scaling
		
		!atmosphereCurve{}
		%atmosphereCurve
		{
			key = 0 303
			key = 1 190
			key = 5 0.001
		}
	}
}


// Tanks //

// Generic patch
@PART[corvus_lv_fuel_tank_s1_?]:NEEDS[TantaresLV]:FIRST{
	@rescaleFactor = 1.2
	@bulkheadProfiles = size1p2
	@entryCost *= 1.6
	@cost *= 1.6
	
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
}
// Specific patches
@PART[corvus_lv_fuel_tank_s1_1]:NEEDS[TantaresLV]:FIRST{
	@mass = 0.225	
	
	RESOURCE
	{
		name = LiquidFuel
		amount = 162
		maxAmount = 162
	}

	RESOURCE
	{
		name = Oxidizer
		amount = 198
		maxAmount = 198
	}
}
@PART[corvus_lv_fuel_tank_s1_2]:NEEDS[TantaresLV]:FIRST{
	@mass = 0.4375	
	
	RESOURCE
	{
		name = LiquidFuel
		amount = 315
		maxAmount = 315
	}

	RESOURCE
	{
		name = Oxidizer
		amount = 385
		maxAmount = 385
	}
}
@PART[corvus_lv_fuel_tank_s1_3]:NEEDS[TantaresLV]:FIRST{
	@mass = 0.875	
	
	RESOURCE
	{
		name = LiquidFuel
		amount = 630
		maxAmount = 630
	}

	RESOURCE
	{
		name = Oxidizer
		amount = 770
		maxAmount = 770
	}
}
@PART[corvus_lv_fuel_tank_s1_4]:NEEDS[TantaresLV]:FIRST{
	@mass = 1.8125	
	
	RESOURCE
	{
		name = LiquidFuel
		amount = 1305
		maxAmount = 1305
	}

	RESOURCE
	{
		name = Oxidizer
		amount = 1595
		maxAmount = 1595
	}
}


// Descriptions //

// Generic patch
@PART[corvus_lv_fuel_tank_s1_?]:NEEDS[TantaresLV]:FINAL{
	@title ^= :1:1.2:
	@tags ^= :1.25:1.5: 
}	
// Specific patches
@PART[corvus_lv_fuel_tank_s1_1]:NEEDS[TantaresLV]:FINAL{
	@description ^= :1m:1.2m:
}
@PART[corvus_lv_fuel_tank_s1_2]:NEEDS[TantaresLV]:FINAL{
	@description ^= :2m:2.4m:
}
@PART[corvus_lv_fuel_tank_s1_3]:NEEDS[TantaresLV]:FINAL{
	@description ^= :4m:4.8m:
}
@PART[corvus_lv_fuel_tank_s1_4]:NEEDS[TantaresLV]:FINAL{
	@description ^= :8m:9.6m:
}


// Waterfall //

@PART[corvus_lv_bare_engine_s1_1]:NEEDS[TantaresLV,TantaresCFG,Waterfall]:FINAL{
	@MODULE[ModuleWaterfallFX]{
		!TEMPLATE,* {}
		TEMPLATE
		{
			templateName = hypergolic-IRFNA-UDMH-lower-1
			overrideParentTransform = thrustTransform
			position = 0,0,0
			rotation = 0, 0, 0
			scale = 0.456, 0.456, 0.456
		}
		TEMPLATE
		{
			templateName = waterfall-nozzle-glow-orange-1
			overrideParentTransform = thrustTransform
			position = 0,0,0
			rotation = 0, 0, 0
			scale = 0.432, 0.432, 0.432
		}
	}
}
@PART[corvus_lv_engine_s1_1]:NEEDS[TantaresLV,TantaresCFG,Waterfall]:FINAL{
	@MODULE[ModuleWaterfallFX]{
		!TEMPLATE,* {}
		TEMPLATE
		{
			templateName = hypergolic-IRFNA-UDMH-lower-1
			overrideParentTransform = thrustTransform
			position = 0,0,0
			rotation = 0, 0, 0
			scale = 0.456, 0.456, 0.456
		}
		TEMPLATE
		{
			templateName = waterfall-nozzle-glow-orange-1
			overrideParentTransform = thrustTransform
			position = 0,0,0
			rotation = 0, 0, 0
			scale = 0.432, 0.432, 0.1
		}
	}
}
@PART[corvus_lv_engine_s1_2]:NEEDS[TantaresLV,TantaresCFG,Waterfall]:FINAL{
	@MODULE[ModuleWaterfallFX]{
		!TEMPLATE,* {}
		TEMPLATE
		{
			templateName = waterfall-hypergolic-IRFNA-UDMH-upper-1
			overrideParentTransform = nozzleTransform
			position = 0,0,0
			rotation = 0, 0, 0
			scale = 0.53, 0.53, 0.53
		}
		TEMPLATE
		{
			templateName = waterfall-nozzle-glow-orange-1
			overrideParentTransform = nozzleTransform
			position = 0,0,0.01
			rotation = 0, 0, 0
			scale = 0.6, 0.6, 0.66
		}
		TEMPLATE
		{
			templateName = hypergolic-IRFNA-UDMH-vernier-1
			overrideParentTransform = vernierTransform
			position = 0,0,0.001
			rotation = 0, 0, 0
			scale = 0.6, 0.6, 0.6
		}
	}
}
@PART[corvus_lv_bare_engine_s1_2]:NEEDS[TantaresLV,TantaresCFG,Waterfall]:FINAL{
	@MODULE[ModuleWaterfallFX]{
		!TEMPLATE,* {}
		TEMPLATE
		{
			templateName = waterfall-hypergolic-IRFNA-UDMH-upper-1
			overrideParentTransform = thrustTransform
			position = 0,0,0
			rotation = 0, 0, 0
			scale = 0.53, 0.53, 0.53
		}
		TEMPLATE
		{
			templateName = waterfall-nozzle-glow-orange-1
			overrideParentTransform = thrustTransform
			position = 0,0,0.01
			rotation = 0, 0, 0
			scale = 0.6, 0.6, 0.66
		}
	}
}

