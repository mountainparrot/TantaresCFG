// adds the NK-15VM/NK-35 for later N1 variants (because we need more stockalike soviet cryogenic engines)
// stats based on The Beardy Penguin & YoshiWoof22's adjusted RO numbers for FAK
+PART[libra_lv_engine_s0_2]:NEEDS[TantaresLV,Waterfall]:FIRST
{
	@name = kea_engine_nk_35_s0_1
	@title = Tantares NK-35 "Kaldkatt" Rocket Engine
	@description = Proposed for use on improved N1 upper stages and UR-700M.
	@mass = 1.3
	
	%VABORGANIZER:NEEDS[VABOrganizer]
	{
		%organizerSubcategory = cryogenicEngines
	}
	
	@MODULE[ModuleEnginesFX]
	{
		@maxThrust = 326 // 25% thrust scaling (1304 kN)
		
		!PROPELLANT,* {}
		!atmosphereCurve {}
		
		PROPELLANT
        {
            name = LqdHydrogen
            ratio = 1.5
            DrawGauge = True
        }
        PROPELLANT
        {
            name = Oxidizer
            ratio = 0.1
        }
        atmosphereCurve
        {
            key = 0 445
            key = 1 344
			key = 6 0.001
        }
	}
	
	!EFFECTS {}
	EFFECTS
    {
        running_closed
        {
            AUDIO
            {
                channel = Ship
                transformName = thrustTransform
                clip = TantaresLV/sounds/sound_rocket_kero
                volume = 0.0 0.0
                volume = 0.1 1.0
                volume = 1.0 1.0
                pitch = 0.0 1.0
                pitch = 1.0 1.0
                loop = true
            }
		}
		engage
        {
            AUDIO
            {
                channel = Ship
                clip = sound_vent_soft
                volume = 0.5
                pitch = 1.0
                loop = false
            }
        }
        flameout
        {
            PREFAB_PARTICLE
            {
                prefabName = fx_exhaustSparks_flameout_2
                transformName = thrustTransform
                oneShot = true
            }
            AUDIO
            {
                channel = Ship
                clip = sound_explosion_low
                volume = 1.0
                pitch = 1.0
                loop = false
            }
        }
		disengage
		{
			AUDIO
			{
				channel = Ship
				clip = sound_explosion_low
				volume = 1.0
				pitch = 0.8
				loop = false
			}
		}
	}
	MODULE
	{
		name = ModuleWaterfallFX
		moduleID = nk35fx
		engineID = basicEngine

		CONTROLLER
		{
			name = atmosphereDepth
			linkedTo = atmosphere_density
		}
		CONTROLLER
		{
			name = throttle
			linkedTo = throttle
			responseRateUp = 0.005
			responseRateDown = 0.1
		}
		CONTROLLER
		{
			name = random
			linkedTo = random
			range = 0,1
		}
		// -----------------------------------------------------
		// Past here should be generated with the ingame editor!
		// ------
		TEMPLATE
		{
			templateName = waterfall-hydrolox-upper-1
			overrideParentTransform = thrustTransform
			position = 0,0,0
			rotation = 0, 0, 0
			scale = 1.35, 1.35, 1.35
		}
		TEMPLATE
		{
			templateName = waterfall-nozzle-glow-blue-1
			overrideParentTransform = thrustTransform
			position = 0,0,0.01
			rotation = 0, 0, 0
			scale = 1.37, 1.37, 1.6
		}
	}
}

@PART[kea_engine_nk_35_s0_1]:NEEDS[TantaresLV,EngineIgnitor]:FOR[zzzKea_configs]
{
	MODULE
	{
		name = ModuleEngineIgnitor
		IgnitionsAvailable = 3
		AutoIgnitionTemperature = 800
		IgnitorType = Internal
		UseUllageSimulation = true
		ChanceWhenUnstable = 0.2
	}
}

